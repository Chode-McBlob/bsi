(function(){"use strict";var n=angular.module("sCart",["lStorage"]).factory("shoppingCart",["$sessionstorage","$rootScope",function(n,t){var i={},r=n;return i.updateCart=function(n,i){var e={key:n,value:i},f=r.getObject("cart"),u=[];Object.keys(f).length==0||f===[]?u.push(e):(u=f,f.forEach(function(n,t){n.key==e.key&&u.splice(u.indexOf(t),1)}),u.push(e));r.setObject("cart",u);t.$broadcast("cartChanged",u)},i.count=function(){return r.getObject("cart").length},i.listCart=function(){return r.getObject("cart")},i.removeItem=function(n){var i=r.getObject("cart"),e=Object.keys(i).length==0||i===[],f,u;if(!e){for(f=i,u=0;u<f.length;u++)f[u].key==n&&i.splice(u,1);r.setObject("cart",i);t.$broadcast("cartChanged",i)}},i.deleteCart=function(){n.clearItem("cart");t.$broadcast("cartChanged",null)},i}]).factory("OrderSvc",["$sessionstorage","$rootScope",function(n,t){function u(n){for(var t in n)if(t!=="gender"&&!(n[t]===""||n[t]==0))return!1;return!0}var i={},r="bsiOrder";return i.promocodes=[{name:"Unga Bunga",code:"BSI-UNGAB"}],i.model={guid:"",gender:"F",fname:"",lname:"",phone:"",email:"",address:"",zip:"",city:"",country:"SK",prods:[],promocode:"",discountperc:0,discount:0,ordertotal:0,payment:""},i.Update=function(i){n.setObject(r,i);t.$broadcast("orderChanged",i)},i.Get=function(){var t=n.getObject(r);return u(t)?i.model:t},i.Delete=function(){n.clearItem(r);t.$broadcast("orderChanged",null)},i}])})(),function(){"use strict";var n=angular.module("occCtrl",["sCart"]).controller("ordercompletecontroller",["$scope","OrderSvc","$location",function(){console.log("AAA")}])}(),function(){"use strict";var n=angular.module("jackpot",[]).controller("jackpotcontroller",["$scope",function(n){n.stopgame=!1;n.result="Hit Start"}])}(),function(){"use strict";var n=angular.module("checkoutCtrl",["sCart"]).controller("checkoutcontroller",["$scope","$http","$location","shoppingCart","CountrySVC","OrderSvc",function(n,t,i,r,u,f){n.order=f.Get();n.countries=u.getCountries();n.sendForm=function(){f.Update(n.order);i.url("/thankyou");n.order.guid=5}}])}(),function(){"use strict";var n=angular.module("cartCtrl",["sCart"]).controller("cartcontroller",["$scope","$http","shoppingCart","$location","OrderSvc",function(n,t,i,r,u){function f(){var t=0,r=[],f=i.listCart();f.forEach(function(n){var i=n.value;delete i.$$hashKey;r.push(i);t+=parseInt(i.total)});n.order.ordertotal=n.prodstotal=t;n.order.prods=r;n.order.discountperc>0&&e();u.Update(n.order)}function e(){n.order.discount=parseInt(n.order.discountperc)*n.order.ordertotal/100;n.order.ordertotal-=n.order.discount}function o(){n.order.promocode="";n.order.discountperc=0;n.order.discount=0;n.order.ordertotal=0;n.order.prods=[];u.Update(n.order)}n.order=u.Get();console.log(u.Get());n.invalidpcode;n.prodstotal=0;f();n.updateItem=function(t){var f=0,o=[],s,r;for(s in n.order.prods)r=n.order.prods[s],r.id==t.id&&(r.total=parseInt(t.amount)*parseInt(t.price),i.updateCart(r.id,r)),f+=r.total,o.push(r);n.order.prods=o;n.order.ordertotal=n.prodstotal=f;n.order.discountperc>0&&e();u.Update(n.order)};n.removeFromCart=function(n){i.count()>1?i.removeItem(n.id):(o(),i.deleteCart());f()};n.emptyCart=function(){i.deleteCart();f()};n.checkout=function(){r.url("/checkout")};n.getPromo=function(){if(n.order.promocode.length&&n.order.promocode.length>0)for(var t in u.promocodes)if(u.promocodes[t].code==n.order.promocode)return u.promocodes[t];return null};n.applyPromo=function(){var t,i;if(n.order.promocode.length&&n.order.promocode.length>0){t=!1;for(i in u.promocodes)u.promocodes[i].code==n.order.promocode&&(n.invalidpcode=!1,n.order.discountperc=10,e(),u.Update(n.order),t=!0);n.invalidpcode=!t}else n.invalidpcode=!0}}])}();